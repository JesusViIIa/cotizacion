<div class="w-full h-full p-4">
    <h2 class="text-xl font-bold w-full text-center ">
        Historial de Cotizaciones
    </h2>

    @for (cotizacion of listadoService.getCotizaciones()(); track $index) {
    <div class="border border-gray-500 rounded-sm p-4 my-2 shadow-sm">
  <div class="flex justify-between items-start">
    <div>
      <div class="text-xs text-gray-300">ID: {{ cotizacion.id }}</div>
      <div class="font-bold text-lg text-white ">{{ cotizacion.cliente.nombre }}</div>
      <div class="text-xs text-gray-300">{{ cotizacion.fechaCotizacion | date:'short' }}</div>
    </div>

    <div class="text-right">
      <div class="text-sm text-gray-300">Plazo: {{ cotizacion.plazo ? cotizacion.plazo + ' meses' : 'Contado' }} </div>
      <div class="text-lg font-bold text-blue-600">${{ cotizacion.costoTotal | number:'1.0-0' }}</div>
      <div class="text-sm text-gray-300">Mensualidad: ${{ cotizacion.mensualidad | number:'1.0-0' }}</div>
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3 text-sm text-gray-300">
    <div>
      <div class="font-medium">Moto</div>
      <div class="truncate">{{ cotizacion.moto.modelo }} - {{ cotizacion.moto.version }}</div>
      <div class="text-gray-300">Precio sin IVA: ${{ cotizacion.precioSinIVA | number:'1.0-0' }}</div>
      <div class="text-gray-300">Precio con IVA: ${{ cotizacion.precioConIVA | number:'1.0-0' }}</div>
    </div>

    <div>
      <div class="font-medium">Detalles financieros</div>
      <div>Enganche: ${{ cotizacion.montoEnganche | number:'1.0-0' }}</div>
      <div>Gastos administrativos: ${{ cotizacion.gastosAdministrativos | number:'1.0-0' }}</div>
      <div>Accesorios (total): ${{ cotizacion.costoAccesorios | number:'1.0-0' }}</div>
    </div>
  </div>

  <div class="mt-3 text-sm">
    <div class="font-medium">Accesorios</div>
@if (cotizacion.accesorios.length > 0) {
    <ul class="list-disc list-inside">
      @for (accesorio of cotizacion.accesorios; track $index) {
      <li>
        {{ accesorio.nombre }} — ${{ accesorio.precio | number:'1.0-0' }}
      </li>
      }
    </ul>
    } @else {
      <div class="text-gray-300">No se agregaron accesorios.</div>
    }

    <div class="mt-2 font-medium">Seguro</div>
    <div class="text-gray-300">
      {{ cotizacion.seguroVehiculo?.nombre || 'Sin seguro' }}
      <span *ngIf="cotizacion.seguroVehiculo">— ${{ cotizacion.seguroVehiculo.precio | number:'1.0-0' }}</span>
    </div>
  </div>
</div>
    } 
    @empty {
        <div>
            Aun no hay cotizaciones
        </div>
    }
</div>